<?php

namespace Database\Seeders;

use App\Models\Blog;
use App\Models\BlogCategory;
use App\Models\User;
use Illuminate\Database\Seeder;

class BlogSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        $user = User::first();
        $seoCategory = BlogCategory::where('slug', 'seo')->first();
        $marketingCategory = BlogCategory::where('slug', 'marketing')->first();
        $analyticsCategory = BlogCategory::where('slug', 'analytics')->first();

        $articles = [
            [
                'title' => '10 способов увеличить органический трафик на сайт',
                'slug' => '10-sposobov-uvelichit-organicheskiy-trafik',
                'excerpt' => 'Практические советы по увеличению органического трафика без вложений в рекламу. Проверенные методы, которые работают в 2024 году.',
                'content' => '<h2>Введение</h2><p>Органический трафик — это основа успешного сайта. В отличие от платной рекламы, он приносит постоянный поток посетителей без дополнительных затрат.</p><h2>1. Оптимизация контента</h2><p>Создавайте качественный, полезный контент, который отвечает на вопросы вашей аудитории. Используйте ключевые слова естественно.</p><h2>2. Техническая оптимизация</h2><p>Убедитесь, что ваш сайт быстро загружается, адаптивен и имеет правильную структуру URL.</p><h2>3. Внутренняя перелинковка</h2><p>Связывайте страницы сайта между собой, чтобы поисковики лучше понимали структуру контента.</p><h2>Заключение</h2><p>Регулярная работа над этими аспектами поможет значительно увеличить органический трафик.</p>',
                'image' => 'blog/seo-traffic.jpg',
                'meta_title' => '10 способов увеличить органический трафик - SEO советы',
                'meta_description' => 'Практические советы по увеличению органического трафика. Проверенные методы SEO оптимизации для роста посещаемости сайта.',
                'is_published' => true,

                'published_at' => now()->subDays(5),
                'user_id' => $user->id,
                'category_id' => $seoCategory->id,
            ],
            [
                'title' => 'Как настроить Google Analytics 4: полное руководство',
                'slug' => 'kak-nastroit-google-analytics-4',
                'excerpt' => 'Пошаговое руководство по настройке GA4 для отслеживания эффективности сайта. Настройка целей, событий и отчетов.',
                'content' => '<h2>Что такое Google Analytics 4</h2><p>GA4 — это новая версия Google Analytics, которая предоставляет более детальную аналитику поведения пользователей.</p><h2>Создание аккаунта</h2><p>Зарегистрируйтесь в Google Analytics и создайте новое свойство для вашего сайта.</p><h2>Установка кода отслеживания</h2><p>Добавьте код GA4 на все страницы сайта перед закрывающим тегом &lt;/head&gt;.</p><h2>Настройка целей</h2><p>Определите ключевые действия пользователей, которые важны для вашего бизнеса.</p><h2>Анализ данных</h2><p>Изучайте отчеты и делайте выводы для улучшения сайта.</p>',
                'image' => 'blog/ga4-setup.jpg',
                'meta_title' => 'Настройка Google Analytics 4 - Полное руководство',
                'meta_description' => 'Пошаговая настройка GA4 для отслеживания эффективности сайта. Настройка целей, событий и создание отчетов.',
                'is_published' => true,

                'published_at' => now()->subDays(12),
                'user_id' => $user->id,
                'category_id' => $analyticsCategory->id,
            ],
            [
                'title' => 'Контент-маркетинг: стратегия для малого бизнеса',
                'slug' => 'kontent-marketing-strategiya-dlya-malogo-biznesa',
                'excerpt' => 'Как создать эффективную стратегию контент-маркетинга с минимальным бюджетом. Практические советы и примеры.',
                'content' => '<h2>Что такое контент-маркетинг</h2><p>Контент-маркетинг — это создание и распространение полезного контента для привлечения и удержания клиентов.</p><h2>Определение целей</h2><p>Четко сформулируйте, чего вы хотите достичь с помощью контента.</p><h2>Изучение аудитории</h2><p>Узнайте, какие темы интересуют ваших потенциальных клиентов.</p><h2>Планирование контента</h2><p>Создайте календарь публикаций и определите форматы контента.</p><h2>Измерение результатов</h2><p>Отслеживайте метрики и корректируйте стратегию.</p>',
                'image' => 'blog/content-marketing.jpg',
                'meta_title' => 'Контент-маркетинг для малого бизнеса - Стратегия',
                'meta_description' => 'Эффективная стратегия контент-маркетинга с минимальным бюджетом. Практические советы и примеры для малого бизнеса.',
                'is_published' => true,

                'published_at' => now()->subDays(18),
                'user_id' => $user->id,
                'category_id' => $marketingCategory->id,
            ],
            [
                'title' => '5 ошибок в SEO, которые убивают трафик',
                'slug' => '5-oshibok-v-seo-kotorye-ubivayut-trafik',
                'excerpt' => 'Частые ошибки в SEO оптимизации, которые могут серьезно навредить позициям сайта в поисковой выдаче.',
                'content' => '<h2>1. Переоптимизация ключевых слов</h2><p>Слишком частое использование ключевых слов делает текст неестественным.</p><h2>2. Игнорирование мобильной версии</h2><p>Google отдает приоритет мобильно-адаптивным сайтам.</p><h2>3. Медленная загрузка</h2><p>Скорость загрузки влияет на ранжирование и поведение пользователей.</p><h2>4. Дублированный контент</h2><p>Одинаковый контент на разных страницах вводит поисковики в заблуждение.</p><h2>5. Отсутствие структурированных данных</h2><p>Schema разметка помогает поисковикам лучше понимать контент.</p>',
                'image' => 'blog/seo-mistakes.jpg',
                'meta_title' => '5 ошибок в SEO, которые убивают трафик',
                'meta_description' => 'Частые ошибки в SEO оптимизации, которые навредят позициям сайта. Как избежать и исправить эти ошибки.',
                'is_published' => true,

                'published_at' => now()->subDays(25),
                'user_id' => $user->id,
                'category_id' => $seoCategory->id,
            ],
            [
                'title' => 'Как измерить ROI от digital-маркетинга',
                'slug' => 'kak-izmerit-roi-ot-digital-marketinga',
                'excerpt' => 'Практические методы расчета возврата инвестиций от digital-маркетинга. Какие метрики отслеживать и как их интерпретировать.',
                'content' => '<h2>Что такое ROI</h2><p>ROI (Return on Investment) — это показатель эффективности инвестиций, выраженный в процентах.</p><h2>Формула расчета</h2><p>ROI = (Прибыль - Затраты) / Затраты × 100%</p><h2>Ключевые метрики</h2><p>Отслеживайте конверсии, стоимость привлечения клиента, пожизненную ценность клиента.</p><h2>Инструменты аналитики</h2><p>Используйте Google Analytics, Яндекс.Метрику, системы CRM для сбора данных.</p><h2>Практические примеры</h2><p>Разберем реальные кейсы расчета ROI для разных каналов привлечения.</p>',
                'image' => 'blog/roi-measurement.jpg',
                'meta_title' => 'Как измерить ROI от digital-маркетинга',
                'meta_description' => 'Практические методы расчета ROI от digital-маркетинга. Какие метрики отслеживать и как их интерпретировать.',
                'is_published' => true,

                'published_at' => now()->subDays(32),
                'user_id' => $user->id,
                'category_id' => $analyticsCategory->id,
            ],
            [
                'title' => 'SMM в 2024: тренды и новые возможности',
                'slug' => 'smm-v-2024-trendy-i-novye-vozmozhnosti',
                'excerpt' => 'Актуальные тренды в социальных сетях на 2024 год. Новые форматы контента и возможности для продвижения бизнеса.',
                'content' => '<h2>Основные тренды 2024</h2><p>Видеоконтент, интерактивность, персонализация — ключевые направления развития SMM.</p><h2>Новые форматы</h2><p>Reels, Stories, Live-трансляции, подкасты набирают популярность.</p><h2>Автоматизация</h2><p>Используйте чат-боты, планировщики постов, CRM-системы для эффективности.</p><h2>Аналитика и метрики</h2><p>Отслеживайте вовлеченность, охваты, конверсии для оптимизации стратегии.</p><h2>Будущее SMM</h2><p>ИИ, AR/VR, голосовые технологии меняют подходы к продвижению.</p>',
                'image' => 'blog/smm-trends-2024.jpg',
                'meta_title' => 'SMM в 2024: тренды и новые возможности',
                'meta_description' => 'Актуальные тренды в социальных сетях на 2024 год. Новые форматы контента и возможности для бизнеса.',
                'is_published' => true,

                'published_at' => now()->subDays(8),
                'user_id' => $user->id,
                'category_id' => $marketingCategory->id,
            ],
        ];

        foreach ($articles as $articleData) {
            Blog::create($articleData);
        }
    }
}
