<?php

namespace Database\Seeders;

use App\Models\ProjectCase;
use App\Models\IndustryCategory;
use App\Models\User;
use Illuminate\Database\Seeder;

class ProjectCaseSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        $user = User::first();
        $ecommerceCategory = IndustryCategory::where('slug', 'ecommerce')->first();
        $educationCategory = IndustryCategory::where('slug', 'education')->first();
        $healthcareCategory = IndustryCategory::where('slug', 'healthcare')->first();
        $financeCategory = IndustryCategory::where('slug', 'finance')->first();

        $cases = [
            [
                'case_id' => 'CASE-001',
                'title' => 'SEO продвижение интернет-магазина электроники',
                'client' => 'ТехноМир',
                'description' => 'Комплексное SEO продвижение интернет-магазина электроники. Увеличение органического трафика в 3 раза за 6 месяцев.',
                'content' => '<h2>Задача</h2><p>Увеличить органический трафик интернет-магазина электроники и поднять позиции по ключевым запросам.</p><h2>Решение</h2><p>Провели технический аудит, оптимизировали структуру сайта, создали качественный контент и настроили внутреннюю перелинковку.</p><h2>Результат</h2><p>Органический трафик вырос в 3 раза, позиции по ключевым запросам поднялись в ТОП-10, конверсия увеличилась на 40%.</p>',
                'image' => 'cases/electronics-store.jpg',
                'period' => '6 месяцев',
                'meta_title' => 'SEO продвижение интернет-магазина электроники - Кейс',
                'meta_description' => 'Кейс SEO продвижения интернет-магазина электроники. Увеличение трафика в 3 раза за 6 месяцев.',
                'is_published' => true,
                'user_id' => $user->id,
                'industry_category_id' => $ecommerceCategory->id,
                'metrics' => [
                    ['name' => 'Органический трафик', 'before' => '2,500', 'after' => '7,800'],
                    ['name' => 'Позиции в ТОП-10', 'before' => '15%', 'after' => '65%'],
                    ['name' => 'Конверсия', 'before' => '2.1%', 'after' => '2.9%'],
                ],
                'results' => [
                    'Увеличение органического трафика в 3 раза',
                    'Рост позиций по ключевым запросам в ТОП-10',
                    'Повышение конверсии на 40%',
                    'Улучшение поведенческих факторов',
                    'Рост продаж на 180%'
                ],
            ],
            [
                'case_id' => 'CASE-002',
                'title' => 'Контекстная реклама для образовательной платформы',
                'client' => 'EduLearn',
                'description' => 'Настройка и оптимизация контекстной рекламы для онлайн-платформы обучения. Снижение стоимости привлечения клиента на 50%.',
                'content' => '<h2>Задача</h2><p>Привлечь больше студентов на платформу онлайн-обучения при снижении стоимости привлечения клиента.</p><h2>Решение</h2><p>Настроили кампании в Google Ads и Яндекс.Директ, создали релевантные объявления и настроили автоматические стратегии.</p><h2>Результат</h2><p>Стоимость привлечения клиента снизилась на 50%, количество заявок увеличилось в 2.5 раза.</p>',
                'image' => 'cases/education-platform.jpg',
                'period' => '4 месяца',
                'meta_title' => 'Контекстная реклама для образовательной платформы - Кейс',
                'meta_description' => 'Кейс настройки контекстной рекламы для онлайн-платформы обучения. Снижение стоимости привлечения на 50%.',
                'is_published' => true,

                'user_id' => $user->id,
                'industry_category_id' => $educationCategory->id,
                'metrics' => [
                    ['name' => 'Стоимость привлечения', 'before' => '₽2,500', 'after' => '₽1,250'],
                    ['name' => 'Количество заявок', 'before' => '120', 'after' => '300'],
                    ['name' => 'CTR', 'before' => '2.1%', 'after' => '4.8%'],
                ],
                'results' => [
                    'Снижение стоимости привлечения на 50%',
                    'Увеличение количества заявок в 2.5 раза',
                    'Повышение CTR в 2.3 раза',
                    'Улучшение качества трафика',
                    'Рост конверсии на 35%'
                ],
            ],
            [
                'case_id' => 'CASE-003',
                'title' => 'SMM продвижение медицинского центра',
                'client' => 'МедЦентр+',
                'description' => 'Комплексное продвижение медицинского центра в социальных сетях. Увеличение узнаваемости бренда и привлечение новых пациентов.',
                'content' => '<h2>Задача</h2><p>Повысить узнаваемость медицинского центра и привлечь новых пациентов через социальные сети.</p><h2>Решение</h2><p>Создали контент-план, запустили рекламные кампании в Instagram и VK, организовали работу с блогерами.</p><h2>Результат</h2><p>Охват вырос в 5 раз, количество записей на прием увеличилось на 200%.</p>',
                'image' => 'cases/medical-center.jpg',
                'period' => '8 месяцев',
                'meta_title' => 'SMM продвижение медицинского центра - Кейс',
                'meta_description' => 'Кейс SMM продвижения медицинского центра. Увеличение узнаваемости бренда и привлечение пациентов.',
                'is_published' => true,

                'user_id' => $user->id,
                'industry_category_id' => $healthcareCategory->id,
                'metrics' => [
                    ['name' => 'Охват в месяц', 'before' => '15,000', 'after' => '75,000'],
                    ['name' => 'Подписчики', 'before' => '2,500', 'after' => '12,800'],
                    ['name' => 'Записи на прием', 'before' => '45', 'after' => '135'],
                ],
                'results' => [
                    'Увеличение охвата в 5 раз',
                    'Рост подписчиков в 5.1 раза',
                    'Увеличение записей на прием на 200%',
                    'Повышение вовлеченности аудитории',
                    'Рост доверия к бренду'
                ],
            ],
            [
                'case_id' => 'CASE-004',
                'title' => 'Веб-разработка для финтех стартапа',
                'client' => 'PayFlow',
                'description' => 'Разработка веб-платформы для финтех стартапа. Создание современного интерфейса и интеграция с платежными системами.',
                'content' => '<h2>Задача</h2><p>Создать современную веб-платформу для финтех стартапа с интеграцией платежных систем и высоким уровнем безопасности.</p><h2>Решение</h2><p>Разработали платформу на Laravel с React фронтендом, интегрировали платежные системы и настроили безопасность.</p><h2>Результат</h2><p>Платформа запущена в срок, обработано 10,000+ транзакций без сбоев, пользователи высоко оценили UX.</p>',
                'image' => 'cases/fintech-platform.jpg',
                'period' => '5 месяцев',
                'meta_title' => 'Веб-разработка для финтех стартапа - Кейс',
                'meta_description' => 'Кейс разработки веб-платформы для финтех стартапа. Современный интерфейс и интеграция платежных систем.',
                'is_published' => true,

                'user_id' => $user->id,
                'industry_category_id' => $financeCategory->id,
                'metrics' => [
                    ['name' => 'Время загрузки', 'before' => '3.2с', 'after' => '1.1с'],
                    ['name' => 'Обработанные транзакции', 'before' => '0', 'after' => '10,000+'],
                    ['name' => 'Оценка пользователей', 'before' => '0', 'after' => '4.8/5'],
                ],
                'results' => [
                    'Создание современной платформы',
                    'Интеграция с платежными системами',
                    'Обработка 10,000+ транзакций',
                    'Высокая оценка пользователей',
                    'Запуск в срок'
                ],
            ],
            [
                'case_id' => 'CASE-005',
                'title' => 'Email-маркетинг для e-commerce',
                'client' => 'FashionStore',
                'description' => 'Настройка email-маркетинга для интернет-магазина одежды. Увеличение повторных покупок на 150% и рост среднего чека.',
                'content' => '<h2>Задача</h2><p>Увеличить повторные покупки и средний чек интернет-магазина одежды через email-маркетинг.</p><h2>Решение</h2><p>Настроили автоматические цепочки писем, сегментировали базу клиентов и создали персонализированные предложения.</p><h2>Результат</h2><p>Повторные покупки выросли на 150%, средний чек увеличился на 35%, открываемость писем достигла 28%.</p>',
                'image' => 'cases/fashion-store.jpg',
                'period' => '3 месяца',
                'meta_title' => 'Email-маркетинг для e-commerce - Кейс',
                'meta_description' => 'Кейс настройки email-маркетинга для интернет-магазина одежды. Увеличение повторных покупок на 150%.',
                'is_published' => true,

                'user_id' => $user->id,
                'industry_category_id' => $ecommerceCategory->id,
                'metrics' => [
                    ['name' => 'Повторные покупки', 'before' => '25%', 'after' => '62.5%'],
                    ['name' => 'Средний чек', 'before' => '₽3,200', 'after' => '₽4,320'],
                    ['name' => 'Открываемость писем', 'before' => '12%', 'after' => '28%'],
                ],
                'results' => [
                    'Увеличение повторных покупок на 150%',
                    'Рост среднего чека на 35%',
                    'Повышение открываемости писем до 28%',
                    'Улучшение персонализации',
                    'Рост лояльности клиентов'
                ],
            ],
        ];

        foreach ($cases as $caseData) {
            ProjectCase::create($caseData);
        }
    }
}
